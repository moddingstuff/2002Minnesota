e = campaignTrail_temp;

            nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#329650";

            nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#32b450";

            document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

            $("#game_window")[0].style.backgroundImage = "url(https://github.com/moddingstuff/2002Minnesota/blob/main/Flag_of_Minnesota.svg.png?raw=true)" 

            $(".container")[0].style.backgroundColor = "#327850";

            document.getElementById("header").src = "https://github.com/moddingstuff/2002Minnesota/blob/main/WellstoneBanner.png?raw=true";

            document.body.background = "https://raw.githubusercontent.com/moddingstuff/2002Minnesota/main/Minnesota_Capitol_night%2C_September_2012_(cropped).jpg";

            function updateRunningMateForm() {
              try {
                const form = document.querySelector("#running_mate_form form");
                const heading = form.querySelector("h3");
                
                heading.textContent = "Please select your party:";
              } catch {}
            }
            window.setInterval(updateRunningMateForm,200)            

            e.election_json = [{"model":"campaign_trail.election","pk":20,"fields":{"year":2016,"summary":"<p>As the 2002 midterms approach, an America reeling from the September 11 attacks chooses a party to take the helm in Congress through economic decline and the War on Terror.</p><p>Since President George W. Bush was sworn in in 2001, more seems to have happened in eighteen months than in the final four-year term of President Clinton. Islamic terrorists, likely to have originated from Al-Qaeda, crashed two aircraft into the Twin Towers and another into the Pentagon. This prompted a hawkish counter-reaction at home, both with the public and policymakers. Not long after, Bush announced an invasion of Afghanistan,and declared Iraq, Iran, and North Korea three rogue, terrorist-harboring states that formed an “Axis of Evil”, laying the groundwork for an invasion of Iraq.<br><button onclick='next0()'>Domestic Policy</button><br></p>","image_url":"https://github.com/moddingstuff/2002Minnesota/blob/main/NYTHeadline.png?raw=true","winning_electoral_vote_number":0,"advisor_url":"https://github.com/moddingstuff/2002Minnesota/blob/main/2002AdvisorFeedback.png?raw=true","recommended_reading":"<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>","has_visits":0,"no_electoral_majority_image":"../static/images/2012-no-majority.jpg"}}];e.temp_election_list = [{"id":20,"year":2016,"is_premium":0,"display_year":"2002 Minnesota U.S. Senate Election"}];e.credits = "big_square";e.global_parameter_json = [{"model":"campaign_trail.global_parameter","pk":1,"fields":{"vote_variable":1.125,"max_swing":0.12,"start_point":0.94,"candidate_issue_weight":10,"running_mate_issue_weight":3,"issue_stance_1_max":-0.71,"issue_stance_2_max":-0.3,"issue_stance_3_max":-0.125,"issue_stance_4_max":0.125,"issue_stance_5_max":0.3,"issue_stance_6_max":0.71,"global_variance":0.01,"state_variance":0.005,"question_count":40,"default_map_color_hex":"#C9C9C9","no_state_map_color_hex":"#999999"}}];e.candidate_json = [{"model":"campaign_trail.candidate","pk":1001,"fields":{"first_name":"Paul","last_name":"Wellstone","election":20,"party":"Democratic ","state":"Rice County","priority":1,"description":"<span id='screen1' style='display: initial;'><p><i>“You remind me of Hubert Humphrey. You talk too much.”</i></p><p>Born and raised in the D.C. area, a young Paul Wellstone went to college in North Carolina, and became an undefeated Atlantic Coast Conference wrestling champion. He married Sheila Ison in 1963. Graduating in 1969 with a degree in political science, he settled down in Northfield, Minnesota, accepting a position as political science professor at Carleton College.</p><p>During his tenure as a professor, Wellstone was very active in the progressive and anti-war movement — in fact, he was arrested for protesting the War in ‘70. In the ‘70s and ‘80s, Wellstone began community organizing, and participating in the labor movement. In fact, he was briefly fired from the college for his activism — before the students staged a sit-in, demanding that Carleton rehire him.<br><button onclick='next2()'>Next</button><br></p></span><span id='screen2' style='display: none;'><p>In ‘82, following an impassioned speech at the state DFL convention, he was nominated by the party for State Auditor, but was bombed out by popular incumbent Arne Carlson. In ‘88, he chaired the Dukakis/Bentsen campaign in Minnesota. In ‘90, he challenged two-term incumbent Rudy Boschwitz for Minnesota’s Senate seat. As a serious underdog, Wellstone ran an underdog, grassroots campaign, and shocked the nation by being the only candidate to upset a Senate incumbent in 1990. Boschwitz came back for revenge in ‘96. Despite his unpopularity and lack of funding, Wellstone, perhaps aided by the Clinton/Gore sweep in Minnesota, beat Rudy in a close rematch.</p><p>In the Senate, Wellstone has been proclaimed the most controversial delegate in the chamber, first for denouncing Jesse Helms’ brand of politics, and next for firmly opposing the Gulf War. Liberals across the nation deemed him the “conscience of the Senate”, whilst conservatives used him as a scapegoat to fuel their appetite for fury. With Norm Coleman polling dangerously close to him, and with Wellstone stuck in a lose-lose situation with the War on Terror, Wellstone will have to crank it up to eleven if he doesn’t want to crash and burn this fall.<br><button onclick='back1()'>Back</button></p></span>","color_hex":"#324bff","secondary_color_hex":null,"is_active":1,"image_url":"https://github.com/moddingstuff/2002Minnesota/blob/main/Wellstone.png?raw=true","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1002,"fields":{"first_name":"Norm","last_name":"Coleman","election":20,"party":"Republican","state":"Ramsey County","priority":1,"description":"<span id='screen5' style='display: initial;'><p><i>\"I have never sought any other political office. I have no other ambition other than to be mayor.\"</i></p><p>Growing up in Brooklyn and attending Hofstra University in the 1960s, Norm Coleman spent much of his college years protesting the Vietnam War and the Nixon administration. After receiving his law degree from the University of Iowa in 1976, he took a job in the office of Minnesota Attorney General Warren Spannaus. Rising through the ranks quickly, he eventually became Solicitor General. It was during this period when he met an actress named Laurie Casserly, who he married in 1981.</p><p>In 1993, Coleman announced he would run for mayor of St. Paul, and was elected as a Democrat. By then, his views had evolved from those of a liberal Democrat to those of a fiscal conservative. As mayor, he notably brought professional ice hockey back to Minnesota. However, he was frequently at odds with the DFL leadership, as well as the more progressive activist DFL base. He was rarely invited to DFL events, and he would be booed at those he did attend.<br><button onclick='next4()'>Next</button><br></p></span><span id='screen6' style='display: none;'><p>Still, though, St. Paul managed significant economic growth throughout Coleman’s tenure, and gained 18,000 jobs, a fact he frequently cited on the trail. Coleman insisted that he remained a proud Democrat, even if some of his values had changed, and that his commitment to the party had not wavered. In ‘96, Coleman endorsed both President Bill Clinton and Senator Paul Wellstone for their respective re-election races, and even chaired Wellstone’s campaign.</p><p>In ‘97, however, he had had enough with the DFL — he became a Republican, stressing that this floor-crossing did not impact his view on the issues. That year, he was re-elected mayor of St. Paul as a Republican. In 1998, he was drafted by the state Republican party to run for Governor. Early polls indicated a tight race between him and Attorney General Skip Humphrey, son of Hubert — however, WWF wrestler and commentator Jesse Ventura, Minnesota Independence Party candidate, shocked the nation by beating both Humphrey and Coleman in an upset. Regardless, his ambition had not changed — and now, it seems a run for the Senate is in the cards for Norm.<br><button onclick='back3()'>Back</button></p></span>","color_hex":"#960032","secondary_color_hex":null,"is_active":1,"image_url":"https://github.com/moddingstuff/2002Minnesota/blob/main/ColemanImage.png?raw=true","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1003,"fields":{"first_name":"Minnesota","last_name":"DFL","election":20,"party":"National Democratic Party","state":"Minnesota","priority":1,"description":"<span id='screen3' style='display: initial;'><p>The Minnesota DFL has, quite possibly, one of the most illustrious histories of any state affiliate of a major party. Initially known as the Minnesota Democratic Party, the rise of the left-wing populist Farmer-Labor Party in the state relegated the Democrats to distant third-party status. The left-leaning Democratic Party and the Farmer-Labor Party eventually combined to form the contemporary DFL.</p><p>Notable DFL legends include U.S. Senators and later Vice Presidents Hubert H. Humphrey and his protege Walter F. “Fritz” Mondale, who have been lauded for their work in the Senate on economic justice, civil rights, and foreign affairs. Coincidentally, these two Minnesotans lost presidential elections to two Californians. Humphrey was defeated by Richard Nixon in an excruciatingly tight race in 1968, and Mondale was defeated by Ronald Reagan in the most lopsided presidential election in American history in 1984, where he won only his home state. In 1992, he was appointed Ambassador to Japan as consolation. Fritz Mondale is now a private citizen, lost in the political wilderness, far, far away from Capitol Hill.<br><button onclick='next3()'>Next</button><br></p></span><span id='screen4' style='display: none;'><p>The courageous liberal fire which Humphrey, Mondale, and others sparked is far from dead in today's DFL. Paul Wellstone is one of six Senators with a perfect score from the Americans for Democratic Action, and he is highly regarded by progressives not only in Minnesota, but across the country. However, in the environment of 2002, this progressive record could become a massive liability. With the country still reeling from the 9/11 terrorist attacks, and President Bush enjoying approval ratings upwards of sixty percent, it seems like the Minnesota Republicans have a good chance of defeating Wellstone. It’s no surprise, then, that this is one of the most closely watched — and financed — Senate races this midterm.<br><button onclick='back2()'>Back</button></p></span><br>","color_hex":"#000000","secondary_color_hex":null,"is_active":0,"image_url":"https://github.com/moddingstuff/2002Minnesota/blob/main/MNDFL.png?raw=true","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"<span id='screen3' style='display: initial;'><p>The Minnesota DFL has, quite possibly, one of the most illustrious histories of any state affiliate of a major party. Initially known as the Minnesota Democratic Party, the rise of the left-wing populist Farmer-Labor Party in the state relegated the Democrats to distant third-party status. The left-leaning Democratic Party and the Farmer-Labor Party eventually combined to form the contemporary DFL.</p><p>Notable DFL legends include U.S. Senators and later Vice Presidents Hubert H. Humphrey and his protege Walter F. “Fritz” Mondale, who have been lauded for their work in the Senate on economic justice, civil rights, and foreign affairs. Coincidentally, these two Minnesotans lost presidential elections to two Californians. Humphrey was defeated by Richard Nixon in an excruciatingly tight race in 1968, and Mondale was defeated by Ronald Reagan in the most lopsided presidential election in American history in 1984, where he won only his home state. In 1992, he was appointed Ambassador to Japan as consolation. Fritz Mondale is now a private citizen, lost in the political wilderness, far, far away from Capitol Hill.<br><button onclick='next3()'>Next</button><br></p></span><span id='screen4' style='display: none;'><p>The courageous liberal fire which Humphrey, Mondale, and others sparked is far from dead in today's DFL. Paul Wellstone is one of six Senators with a perfect score from the Americans for Democratic Action, and he is highly regarded by progressives not only in Minnesota, but across the country. However, in the environment of 2002, this progressive record could become a massive liability. With the country still reeling from the 9/11 terrorist attacks, and President Bush enjoying approval ratings upwards of sixty percent, it seems like the Minnesota Republicans have a good chance of defeating Wellstone. It’s no surprise, then, that this is one of the most closely watched — and financed — Senate races this midterm.<br><button onclick='back2()'>Back</button></p></span><br>","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1004,"fields":{"first_name":"Minnesota","last_name":"GOP","election":20,"party":"National Republican Party","state":"Minnesota","priority":1,"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!","color_hex":"#000000","secondary_color_hex":null,"is_active":0,"image_url":"https://github.com/moddingstuff/2002Minnesota/blob/main/MNGOPimage.png?raw=true","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"<span id='screen7' style='display: initial;'><p>The Minnesota Republican Party has played second-fiddle to the DFL for most of its post-war history. Minnesota currently has two Democratic Senators, and has voted for the Democratic ticket every election since 1972. This year’s elections look like the best chance for the MNGOP to change that.</p><p>After Hubert Humphrey won his Senate seat in ‘48, the Minnesota Republican Party seemed to be entering a state of terminal decline — the Governorship was lost in 1954, and the other Senate seats was lost in 1958. The most notable Minnesota Republican of the fifties was Walter Judd, who gave the keynote in the 1960 convention — and even he got bombed out in ‘62. In ‘75, the party even changed their name to the Independent-Republicans of Minnesota, since the Republican label had been tarnished by Watergate.<br><button onclick='next5()'>Next</button><br></p></span><span id='screen8' style='display: none;'><p>However, after the state’s “patron saint” Humphrey had passed away, the party experienced a revival. In 1978, the Independent-Republicans triumphed: they seized both Senate seats and the Governorship from the DFL. The next time the DFL would gain a Senate seat would be in 1990, with the upset election of Paul Wellstone. In 2000, Mark Dayton won the other Senate seat too, leaving the Minnesota Republicans without a Senate seat for the first time in twenty years.</p><p>Coleman, with his moderate appeal and successful record in St. Paul, initially wanted to run for the Governorship again this year — but with a bit of arm-twisting from Bush and Cheney, Coleman has agreed to run for the Senate instead. The Minnesota Republicans have traditionally outlined a more moderate course than the national party. However, with the rise of the Religious Right, it will be tough for Coleman to balance the Republican conservative base with the moderates he needs to flip this seat.<br><button onclick='back4()'>Back</button></p></span>","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1005,"fields":{"first_name":"Jim","last_name":"Moore","election":20,"party":"Minnesota Independence Party","state":"?","priority":1,"description":"","color_hex":"#9600ff","secondary_color_hex":null,"is_active":0,"image_url":"","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1006,"fields":{"first_name":"Tricomo /","last_name":"Other Candidates","election":20,"party":"Green / Other Parties","state":"?","priority":1,"description":"","color_hex":"#1eb432","secondary_color_hex":null,"is_active":0,"image_url":"","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}}];e.running_mate_json = [{"model":"campaign_trail.running_mate","pk":2001,"fields":{"candidate":1001,"running_mate":1003}},{"model":"campaign_trail.running_mate","pk":2002,"fields":{"candidate":1002,"running_mate":1004}}];

next0 = function() {
const imageElement = document.querySelector('#election_image img');
imageElement.setAttribute('src', 'https://github.com/moddingstuff/2002Minnesota/blob/main/BushKennedy.png?raw=true');
text = "<p>Domestically speaking, Bush has been surprisingly successful at shepherding his agenda through Congress. From pushing through a 1.35 trillion dollar tax cut, to working with Ted Kennedy to reform the education system and introduce nationwide standardized testing, to advancing campaign finance reform, the President has convinced many that he has kept his promises.</p><p>Approval-wise, Bush is enjoying steady support from the American people. After the events of September 11, America seems to be standing by its current leadership, which may pose a problem for the Democrats, who are more-or-less forced to run on an anti-incumbent message.</p><p>This is all about the country as a whole, though — how about the North Star State?<br><button onclick='back0()'>Reset</button> <button onclick='next1()'>The Senate Race</button></p>"
document.getElementById("election_summary").innerHTML = text
}

next1 = function() {
const imageElement = document.querySelector('#election_image img');
imageElement.setAttribute('src', 'https://github.com/moddingstuff/2002Minnesota/blob/main/2002MinnesotaImage.png?raw=true');
text = "<p>Minnesota’s 2002 Senate campaign seems to be an accurate reflection of which way the nation’s politics is generally flowing towards — a bellwether, of sorts.</p><ul><li>The popular Democrat-turned-Republican Mayor Norm Coleman has been convinced to run for the Senate instead of taking another shot at the Governorship. He needs to demonstrate that Wellstone has become out-of-touch with Minnesota, and emphasize changing the tone in Washington.</li><li>Despite a pledge to serve only two, Senator Paul Wellstone is running for a third term. To win, Wellstone must convince Minnesota that the country needs sharp oversight and containment of the Bush administration, while navigating the landmine-ridden issue of the War on Terror.</li></ul><p>Given no unexpected surprises, this election is likely going to be just another milquetoast Senate race, relegated to the footnotes of the history books.<br><button onclick='back0()'>Reset</button></p>"
document.getElementById("election_summary").innerHTML = text
}

next2 = function() {
document.getElementById("screen1").style.display = "none"
document.getElementById("screen2").style.display = "initial"
}

next3 = function() {
document.getElementById("screen3").style.display = "none"
document.getElementById("screen4").style.display = "initial"
}

next4 = function() {
document.getElementById("screen5").style.display = "none"
document.getElementById("screen6").style.display = "initial"
}

next5 = function() {
document.getElementById("screen7").style.display = "none"
document.getElementById("screen8").style.display = "initial"
}

back0 = function() {
const imageElement = document.querySelector('#election_image img');
imageElement.setAttribute('src', 'https://github.com/moddingstuff/2002Minnesota/blob/main/NYTHeadline.png?raw=true');
text = "<p>As the 2002 midterms approach, an America reeling from the September 11 attacks chooses a party to take the helm in Congress through economic decline and the War on Terror.</p><p>Since President George W. Bush was sworn in in 2001, more seems to have happened in eighteen months than in the final four-year term of President Clinton. Islamic terrorists, likely to have originated from Al-Qaeda, crashed two aircraft into the Twin Towers and another into the Pentagon. This prompted a hawkish counter-reaction at home, both with the public and policymakers. Not long after, Bush announced an invasion of Afghanistan, and declared Iraq, Iran, and North Korea three rogue, terrorist-harboring states that formed an “Axis of Evil”, laying the groundwork for an invasion of Iraq.<br><button onclick='next0()'>Domestic Policy</button><br></p>"
document.getElementById("election_summary").innerHTML = text
}

back1 = function() {
document.getElementById("screen1").style.display = "initial"
document.getElementById("screen2").style.display = "none"
}

back2 = function() {
document.getElementById("screen3").style.display = "initial"
document.getElementById("screen4").style.display = "none"
}

back3 = function() {
document.getElementById("screen5").style.display = "initial"
document.getElementById("screen6").style.display = "none"
}

back4 = function() {
document.getElementById("screen7").style.display = "initial"
document.getElementById("screen8").style.display = "none"
}

e.music = {};
e.music.shuffleEnabled = false;
e.music.Volume = 0.5;
e.music.loopEnabled = false;

quotes = [`“To choose Norm Coleman over Walter Mondale is like going to a great steakhouse and ordering a tuna sandwich.” — Garrison Keillor`, `“Walter Mondale once said God has no place in American politics and it turned out that God felt the same way about Walter Mondale.” — Argus Hamilton`, `“It is easy to criticize, particularly in a political season. But to lead is something altogether different.” — Norm Coleman`, `“It is intellectually dishonest to look backwards with all the facts and judge the decisions that were made with almost none of the facts.” — Norm Coleman`, `“Let us never forget that terrorism at its heart, at its evil heart, is a psychological war. It endeavors to break the spirit and the resolve of those it attacks.” — Norm Coleman`, `“I represent the Democratic wing of the Democratic Party.” — Paul Wellstone`, `“Politics is not about power. Politics is not about money. Politics is not about predictions. Politics is not about observations.” — Paul Wellstone`, `“Politics is what we do. Politics is what we create, by what we work for, by what we hope for, and by what we dare to imagine.” — Paul Wellstone`, `“Modern politics today requires a mastery of television. I've never really warmed up to television and, in fairness to television, it's never warmed up to me.” — Walter Mondale`, `“It’s time to stand up for decency and fairness and compassion and caring.” — Walter Mondale`, ]
customquote = quotes[Math.floor((Math.random() * quotes.length))]

corrr="\n<h2>The Minnesota Trail</h2><font id='wittyquote' size='4' color='white'><em>" + customquote + "</em></font>"

 $("#game_start").click((event) => {
    event.preventDefault();
    musicMode()
      })
    musicMode = () => {
        $("#music_player")[0].children[0].style.display = "none"
        $("#music_player")[0].children[1].style.display = "none"
        document.getElementById("modLoadReveal").style.display = "none"
        document.getElementById("modloaddiv").style.display = "none"
        musicBox = document.getElementById("music_player")
        musicBox.style.display = ""
        var trackSel;
        e = campaignTrail_temp
        e.selectedSoundtrack = 0
        toTime = (seconds) => {
            var date = new Date(null);
            date.setSeconds(seconds);
            return date.toISOString().substr(11, 8);
        }
        generateTime = () => {
            // Get the audio element
            var audio = document.getElementById("campaigntrailmusic");
            timeTracker = document.createElement("div");
            timeTracker.id ='timeTracker'
            timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:200px;
      width:200px;
      background-color:#32d24f;
      float:right;
      padding: 10px;
      `
            $("#trackSelParent")[0].prepend(timeTracker);
            $("#trackSelParent")[0].prepend(document.createElement("br"));
            var positionDisplay = document.createElement("gg");
            positionDisplay.id = "position-display";
            var timeSlider = document.createElement("input");
            timeSlider.type = "range";
            timeSlider.min = 0;
            timeSlider.max = 1;
            timeSlider.step = 0.001;
            timeSlider.value = 0;
            timeSlider.style.width = "200px";
            timeSlider.id = "time-slider";
            var pausePlay = document.createElement("button");
            pausePlay.id = "position-display";
            pausePlay.innerHTML = "<b>Play/Pause</b>"
            pausePlay.style.width = "100%";
            pausePlay.style.margin = "2px";
            pausePlay.addEventListener("click", event => {
                event.preventDefault();
                updatePositionDisplay();
                let audio = document.getElementById("campaigntrailmusic");
                if (audio.paused) {
                    audio.play();
                    event.target.innerHTML = "<b>Play/Pause</b>";
                    return;
                }
                audio.pause();
                event.target.innerHTML = "<b>Play/Pause</b>";
                return;
            })
            var shuffleButton = document.createElement("button");
            shuffleButton.id = "shuffle-button";
            shuffleButton.innerHTML = "<b>Shuffle</b>"
            shuffleButton.style.width = "100%"
            shuffleButton.style.margin = "2px";;
            shuffleButton.addEventListener("click", event => {
                event.preventDefault();
                e.music.shuffleEnabled = !e.music.shuffleEnabled;
                event.target.innerHTML = e.music.shuffleEnabled ? "<b>Unshuffle</b>" : "<b>Shuffle</b>";
                if (e.music.shuffleEnabled) {
                    shuffledIndices = shuffle(trackIndices.slice());
                    let currentTrackIndex = Number(document.querySelector('input[name="trackSelector"]:checked').value);
                    shuffledIndices = shuffledIndices.filter(index => index !== currentTrackIndex);
                    shuffledIndices.unshift(currentTrackIndex);
                }
            });
            var skipButton = document.createElement("button");
            skipButton.id = "skip-button";
            skipButton.innerHTML = "<b>Skip</b>"
            skipButton.style.width = "100%";
            skipButton.style.margin = "2px"; // Add margin
            skipButton.addEventListener("click", event => {
                event.preventDefault();
                let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
                let newSel;
                if (e.music.shuffleEnabled) {
                    if (!shuffledIndices) {
                        shuffledIndices = shuffle(trackIndices.slice());
                    }
                    let currentIndex = shuffledIndices.findIndex(index => index === selected);
                    if (currentIndex === shuffledIndices.length - 1) {
                        shuffledIndices = shuffle(trackIndices.slice());
                        currentIndex = -1;
                    }
                    newSel = shuffledIndices[currentIndex + 1];
                } else {
                    newSel = selected + 1 === soundtracks[e.selectedSoundtrack].tracklist.length ? 0 : selected + 1;
                }
                let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                        return f.tagName == "LABEL"
                    }).map(f => f.children[0])
                buttons[newSel].click()
            });
            skipButton.style.width = "50%";
            var loopButton = document.createElement("button");
            loopButton.id = "loop-button";
            loopButton.innerHTML = e.music.loopEnabled ? "<b>Unloop</b>" : "<b>Loop Song</b>";  // Check the initial loop state
            loopButton.style.width = "50%";  // Match the width with skipButton
            loopButton.style.margin = "2px";
            loopButton.addEventListener("click", event => {
                event.preventDefault();
                e.music.loopEnabled = !e.music.loopEnabled;
                let audio = document.getElementById("campaigntrailmusic");
                audio.loop = e.music.loopEnabled;  // Set the audio's loop property
                event.target.innerHTML = e.music.loopEnabled ? "<b>Unloop</b>" : "<b>Loop Song</b>";  // Toggle the button text
            });
            var volumeLabel = document.createElement("gg");
            volumeLabel.id = "volume-label";
            volumeLabel.innerHTML = "<br><b>Volume: </b>"
            var volumeSlider = document.createElement("input");
            volumeSlider.type = "range";
            volumeSlider.min = 0;
            volumeSlider.max = 1;
            volumeSlider.step = 0.0625;
            volumeSlider.value = 0;
            volumeSlider.style.width = "200px";
            volumeSlider.id = "volume-slider";
            audio.volume = e.music.Volume;
            volumeSlider.value = audio.volume;
            timeTracker.appendChild(pausePlay);
            if (audio.volume === 0) {
                audio.pause();
                pausePlay.innerHTML = "<b>Play/Pause</b>";
            }
            timeTracker.appendChild(shuffleButton);
            var buttonContainer = document.createElement("div");
            buttonContainer.style.display = "flex"; // Makes children inline
            buttonContainer.style.justifyContent = "space-between";
            skipButton.style.flex = "1"; // Makes it take up equal space
            skipButton.style.marginRight = "5px"; // Adds some space between the buttons

            loopButton.style.marginRight = "0px";

            buttonContainer.appendChild(skipButton);
            buttonContainer.appendChild(loopButton);

            timeTracker.appendChild(buttonContainer); // Add the container to timeTracker instead of individual buttons
            timeTracker.appendChild(positionDisplay);
            timeTracker.appendChild(timeSlider);
            timeTracker.appendChild(volumeLabel);
            timeTracker.appendChild(volumeSlider);
            updatePositionDisplay();
            function updatePositionDisplay() {
                positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
                timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
            }
            function changeTime() {
                positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
                audio.currentTime = timeSlider.value * audio.duration;
            }
            updateVolume = event => {
                audio.volume = event.target.value;
                e.music.Volume=audio.volume;
            }
            setInterval(updatePositionDisplay, 1000);
            timeSlider.addEventListener("input", changeTime);
            volumeSlider.addEventListener("input", updateVolume)
        }

    function newMusicPlayer(previousBgImage = null) {
            trackSel = document.createElement("div");
            trackSel.id = "trackSelParent";
            let z = `<br><br><br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#32d24f;float:right;">`
            z += `<b><select id='selectSoundtrack'><option value='` + soundtracks[e.selectedSoundtrack].name + `'>` + soundtracks[e.selectedSoundtrack].name + "</option>"
            for (i in soundtracks) {
                if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
                    z += `<option value='` + soundtracks[i].name + `'>` + soundtracks[i].name + `</option>`
                }
            }
            z += `</select></b><br><br>`
                // <label><input type="radio" name="option" value="option1">Option 1</label><br>
            for (i in soundtracks[e.selectedSoundtrack].tracklist) {
                let a = soundtracks[e.selectedSoundtrack].tracklist[i]
                let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="` + i + `">` + a.name + `</label><br>`
                z += b
            }
            z += "</div><br><br>"
            trackSel.innerHTML = z
            musicBox.appendChild(trackSel);
            Array.from(document.getElementById("trackSel").children).filter(f => {
                return f.tagName == "LABEL"
            }).map(f => f.children[0])[0].checked = true
            soundtrackSelector = document.getElementById("selectSoundtrack")
            soundtrackSelector.onchange = function() {
                let currentBgImage = document.getElementById("trackSel").style.backgroundImage;

                for (i in soundtracks) {
                    if (soundtracks[i].name == soundtrackSelector.value) {
                        e.selectedSoundtrack = i;
                        break;
                    }
                }
                e.music.shuffleEnabled = false;
                shuffledIndices = null;

                document.getElementById("trackSelParent").remove();
                newMusicPlayer(currentBgImage);  // Pass the current background image to the next function invocation.
            };
            var matches = document.querySelectorAll('.trackSelector');
            for (match in matches) {
                matches[match].onchange = function() {
                    audio = $("#campaigntrailmusic")[0];
                    audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
                    audio.currentTime = 0
                }
            }
            musicBox.children[2].loop = false
            musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

            trackIndices = Array.from({length: soundtracks[e.selectedSoundtrack].tracklist.length}, (_, i) => i);

            musicBox.children[2].onended = function() {
                if (e.music.loopEnabled) {
                    this.play();  // If loop is enabled, simply play the same track again
                } else {
                let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
                let newSel;
                if (e.music.shuffleEnabled) {
                    if (!shuffledIndices) {
                        shuffledIndices = shuffle(trackIndices.slice());
                    }
                    let currentIndex = shuffledIndices.findIndex(index => index === selected);
                    if (currentIndex === shuffledIndices.length - 1) {
                        shuffledIndices = shuffle(trackIndices.slice());
                        currentIndex = -1;
                    }
                    newSel = shuffledIndices[currentIndex + 1];
                } else {
                    newSel = selected + 1 === soundtracks[e.selectedSoundtrack].tracklist.length ? 0 : selected + 1;
                }
                let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                        return f.tagName == "LABEL"
                    }).map(f => f.children[0])
                buttons[newSel].click()
                }
            }

            for (w = 0; w < 7; w++) {
              document.getElementById("trackSelParent").appendChild(document.createElement("br"))
            }
            generateTime();
           if (previousBgImage) {
                document.getElementById("trackSel").style.backgroundImage = previousBgImage;
                 document.getElementById("timeTracker").style.backgroundImage = previousBgImage;
            }
        }
        clamp = function(a, max, min, overflow = true) {
            if (overflow) {
                return a > max ? min : a < min ? max : a;
            }
            return a > max ? max : a < min ? min : a;
        }
        var soundtracks = {
		 0: {
              name: "Change",
              tracklist: [
                {
                  "name": "Learn to Fly — Foo Fighters",
                  "url": "https://od.lk/d/NDlfMzI4MjY0NTJf/Learn%20To%20Fly.mp3"
                },
                {
                  "name": "Creep — Radiohead",
                  "url": "https://od.lk/d/NDlfMzI4MjM1NzJf/x2mate.com%20-%20Radiohead%20-%20Creep%20%28320%20kbps%29.mp3"
                },
                {
                  "name": "2 + 2 = 5 — Radiohead",
                  "url": "https://od.lk/d/NDlfMzI4MjM1NzFf/x2mate.com%20-%202%20%2B%202%20%3D%205%20%28320%20kbps%29.mp3"
                },
                {
                  "name": "Holiday — Green Day",
                  "url": "https://od.lk/d/NDlfMzI4MjM1NjZf/x2mate.com%20-%20Green%20Day%20-%20Holiday%20%5BOfficial%20Music%20Video%5D%20%28320%20kbps%29.mp3"
                },
                {
                  "name": "Boulevard of Broken Dreams — Green Day",
                  "url": "https://od.lk/d/NDlfMzI4MjM1NjVf/x2mate.com%20-%20Green%20Day%20-%20Boulevard%20Of%20Broken%20Dreams%20%5BOfficial%20Music%20Video%5D%20%28320%20kbps%29.mp3"
                },
                {
                  "name": "Beautiful Day — U2",
                  "url": "https://od.lk/d/NDlfMzI4MjM1NzBf/x2mate.com%20-%20U2%20-%20Beautiful%20Day%20%28Official%20Music%20Video%29%20%28320%20kbps%29.mp3"
                },
                {
                  "name": "Since You've Been Gone — Kelly Clarkson",
                  "url": "https://od.lk/d/NDlfMzI4MjM1Njlf/x2mate.com%20-%20Kelly%20Clarkson%20-%20Since%20U%20Been%20Gone%20%28VIDEO%29%20%28320%20kbps%29.mp3"
                },
                {
                  "name": "In The End — Linkin Park",
                  "url": "https://od.lk/d/NDlfMzI4MjM1Njhf/x2mate.com%20-%20In%20The%20End%20%5BOfficial%20HD%20Music%20Video%5D%20-%20Linkin%20Park%20%28320%20kbps%29.mp3"
                }
				]
			},
            1: {
              name: "Orthodoxy",
              tracklist: [
                {
                    "name": "Don't Stop — Fleetwood Mac",
                    "url": "https://od.lk/d/NDlfMzI4MjY0NTNf/x2mate.com%20-%20Fleetwood%20Mac%20-%20Don%27t%20Stop%20%28Official%20Music%20Video%29%20%5B4K%20Remaster%5D%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "You Ain't Seen Nothing Yet — Bachmann-Turner Overdrive",
                    "url": "https://od.lk/d/NDlfMzI4MjY0NzVf/x2mate.com%20-%20Bachman%20Turner%20Overdrive%20-%20You%20Ain%27t%20Seen%20Nothing%20Yet%201974%20Video%20Sound%20HQ%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "Disco Inferno — The Trammps",
                    "url": "https://od.lk/d/NDlfMzI4MjY0OTNf/x2mate.com%20-%20The%20Trammps%20-%20Disco%20Inferno%20%281976%29%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "I'm Still Standing — Elton John",
                    "url": "https://od.lk/d/NDlfMzI4MjY0NzNf/x2mate.com%20-%20Elton%20John%20-%20I%27m%20Still%20Standing%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "I Want It That Way — Backstreet Boys",
                    "url": "https://od.lk/d/NDlfMzI4MjY0OTJf/x2mate.com%20-%20Backstreet%20Boys%20-%20I%20Want%20It%20That%20Way%20%28Official%20HD%20Video%29%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "The Power of Love — Huey Lewis and the News",
                    "url": "https://od.lk/d/NDlfMzI4MjY1MDVf/x2mate.com%20-%20Huey%20Lewis%20%26%20The%20News%20-%20The%20Power%20Of%20Love%20%28Official%20Video%29%2C%20Full%20HD%20Digitally%20Remastered%20%26%20Upscaled%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "Closing Time — Semisonic",
                    "url": "https://od.lk/d/NDlfMzI4MjY1MDRf/x2mate.com%20-%20Semisonic%20-%20Closing%20Time%20%28Official%20Music%20Video%29%20%28320%20kbps%29.mp3"
                },
                {
                    "name": "American Pie — Don McLean",
                    "url": "https://od.lk/d/NDlfMzI4MjY0NTRf/x2mate.com%20-%20Don%20McLean%20-%20American%20Pie%20%28Lyric%20Video%29%20%28320%20kbps%29.mp3"
                }
            ]
                },
        }
        newMusicPlayer()
      }
      function shuffle(array) {
        let currentIndex = array.length, temporaryValue, randomIndex;

        while (0 !== currentIndex) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;

            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }

        return array;
    }
